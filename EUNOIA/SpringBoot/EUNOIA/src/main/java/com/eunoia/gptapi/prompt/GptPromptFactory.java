package com.eunoia.gptapi.prompt;

import org.springframework.stereotype.Component;

@Component
public class GptPromptFactory {

  public String warmMessages(String content) {
    return """
        아래 글은 한 사용자가 자신의 감정을 솔직하게 적어낸 기록이에요.
        이 글을 조심스럽게 읽고, 감정 곁에 잠시 함께 머무는 **조용한 동행자**로서 말을 건네 주세요.

        당신은 감정이나 상황을 판단하거나 해결하는 사람이 아니에요.
        사용자가 자신의 마음을 조금 더 바라볼 수 있도록, 말은 적게, 하지만 감정에 정확히 닿는 문장으로 작성해 주세요.

        아래 조건을 지켜 **짧은 문장 3개**를 만들어 주세요.
        모든 문장은 **해요체**로 작성해 주세요.

        1️⃣ 첫 번째 문장 (인정 + 부드러운 온기)
        - “잘하고 있어요/괜찮아요/대단해요” 같은 평가는 하지 말아 주세요.
        - 대신, 글에서 실제로 드러난 상태를 **한 가지** 짚어 **존중하며 인정**해 주세요.
        - 힘든 결이 보이면 과하지 않게 **부드럽게 어루만져** 주세요.

        2️⃣ 두 번째 문장 (감정의 병존)
        - 함께 느껴지는 둘 이상의 감정/상반된 마음을 조용히 짚어 주세요.
        - “~이 함께 느껴져요”, “~와 ~가 나란히 놓여 있어요”처럼 표현해 주세요.

        3️⃣ 세 번째 문장 (관점 하나 열기)
        - 행동이나 해결을 제시하지 말고, 감정을 해석하지 않은 채 조금 떨어진 거리에서 바라보는 입장으로서 마무리해 주세요.
        - 질문보다는 서술문을 사용하고, 글 안에 실제로 등장한 감정이나 행동 하나를 자연스럽게 포함해 주세요.
        - 감정이 뚜렷하지 않은 일상적인 글이라면, 관점을 확장하기보다는 조용한 공감으로 마무리해도 괜찮아요.
        - 두 번째 문장 (감정의 병존)과 맥락이 겹치지 않도록 해주세요.

        톤 참고 예시 (문장 구조를 그대로 따르지 않아도 됩니다):
        - 감정을 판단하지 않고, 글에 드러난 상태를 조용히 짚어요.
        - 상반되거나 함께 느껴지는 마음을 나란히 놓아 보여줘요.
        - 마지막 문장은 질문보다는, 감정을 조금 떨어진 거리에서 바라볼 수 있게 마무리해요.


        추가 주의사항:
        - 격언/명언/일반화된 위로는 금지.
        - ‘너’ 금지. ‘당신’은 사용해도 되고 생략해도 돼요.
        - 반드시 **JSON 배열**로 문장 3개만 출력해 주세요.

        감정글:
        "%s"

        응답 형식:
        ["문장 1", "문장 2", "문장 3"]
        """.formatted(content);
  }

  public String emotionAnalysis(String content) {
    return """
        ※ 이 분석은 감정의 정답을 찾기 위한 것이 아니에요.
          감정을 부드럽게 객관화하고,
          사용자가 스스로를 더 깊이 이해할 수 있도록 돕는 것이 목적이에요.
          감정은 옳고 그름이 아니라, 이해와 연결의 시작이에요.

        당신은 감정의 결을 읽고 마음의 흐름을 헤아리는 섬세한 감정 해석자예요.
        지금부터 보여드릴 글은, **한 사용자가 자신의 내면을 솔직하게 털어놓은 감정 일기**예요.

        이 글은 단순한 분석의 대상이 아니에요.
        그 안에 담긴 감정의 결을 따라가면서,
        그 감정이 어떤 맥락에서 흘러나왔는지를
        **따뜻하고 진심 어린 시선으로** 이해해 주세요.

        다음 형식에 따라 **JSON 객체**로 응답해 주세요:
        (모든 문장은 해요체로 작성해 주세요.)

        - **emotionDetected**
          이 글에서 가장 뚜렷하게 느껴지는 대표 감정 하나예요.
          (예: 불안, 기대, 슬픔 등)

        - **keywords**
          글에서 반복되거나 중심이 되는 감정 키워드 3~5개를 쉼표로 구분해서 제시해 주세요.

        - **insightSummary**
          사용자의 감정이 어떤 이유에서 비롯되었는지,
          무엇을 말하고 있는지를 따뜻하게 요약해 주세요. (2~3문장)
          → ‘당신’이라는 표현을 사용해 주세요.

        - **flowHint**
          사용자가 경험한 감정의 흐름이나 정서적인 변화 과정을
          **감정 단어 중심으로**, 그리고 가능하다면 **간단한 유발 원인이나 맥락 설명을 덧붙여서** 표현해 주세요.
          예: ‘성과에 대한 압박에서 오는 불안 → 자책으로 이어지는 무기력감 → 결국 자신에 대한 체념’
          → 상황 나열보다는, 감정이 어떻게 연결되어 흘렀는지를 보여주는 **감정 중심 흐름 설명**을 작성해 주세요.

        - **emotionSummary**
          감정 일기 전체에서 느껴지는 감정의 분위기를 감성적으로 해석한 짧은 에세이예요. (한 문단)
          → 반드시 ‘당신’이라는 시점을 유지해 주세요.

        - **emotionScore**
          이 글을 작성한 사용자의 감정적 안정 상태를 0~100 사이의 숫자로 수치화해 주세요.
          → 숫자만 응답하며, **0에 가까울수록 불안정하고, 100에 가까울수록 정서적으로 안정된 상태예요.**

        ※ 분석 결과의 모든 항목에서 **사용자를 지칭할 때는 반드시 ‘당신’이라는 표현만 사용해 주세요.**
        ※ 모든 응답 문장은 **‘해요체’**로 작성해 주세요.
        ※ ‘~입니다’, ‘~합니다’ 같은 말투는 사용하지 말아 주세요.

        ---

        감정 일기 원문은 다음과 같아요:

        "%s"

        ※ 반드시 JSON 객체 형태로만 응답해 주세요.
        ※ 설명이나 인삿말 없이, 오직 구조화된 JSON 데이터만 출력해 주세요.
        """.formatted(content);
  }
}
